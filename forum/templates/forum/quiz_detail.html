{% extends 'base.html' %}

{% block title %}{{ quiz.title }}{% endblock %}

{% block main %}
<nav aria-label="breadcrumb" class="mb-4">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
      <a href="{% url 'forum:index' %}" class="text-decoration-none"><i class="bi bi-house"></i> Diễn đàn</a>
    </li>
    <li class="breadcrumb-item">
      <a href="{% url 'forum:subject_detail' quiz.subject.id %}" class="text-decoration-none">{{ quiz.subject.name }}</a>
    </li>
    <li class="breadcrumb-item active">Bài trắc nghiệm</li>
  </ol>
</nav>

<div class="row">
  <div class="col-lg-8">
    <div class="card shadow-sm">
      <div class="card-header bg-primary text-white">
        <h4 class="card-title mb-0"><i class="bi bi-patch-question"></i> {{ quiz.title }}</h4>
      </div>
      <div class="card-body">
        <p class="lead">{{ quiz.description }}</p>

        <div class="row mb-4">
          <div class="col-md-6">
            <div class="d-flex align-items-center mb-2">
              <i class="bi bi-clock text-primary me-2"></i>
              <strong>Thời gian:</strong>
              <span class="ms-2">{{ quiz.time_limit }} phút</span>
            </div>
            <div class="d-flex align-items-center mb-2">
              <i class="bi bi-question-circle text-primary me-2"></i>
              <strong>Số câu:</strong>
              <span class="ms-2">{{ quiz.questions.count }} câu</span>
            </div>
          </div>
          <div class="col-md-6">
            <div class="d-flex align-items-center mb-2">
              <i class="bi bi-bar-chart text-primary me-2"></i>
              <strong>Độ khó:</strong>
              <span class="ms-2">Trung bình</span>
            </div>
            <div class="d-flex align-items-center">
              <i class="bi bi-people text-primary me-2"></i>
              <strong>Lượt làm:</strong>
              <span class="ms-2">{{ quiz.quizattempt_set.count }}</span>
            </div>
          </div>
        </div>

        {% if active_attempt %}
        <div class="alert alert-warning">
          <i class="bi bi-exclamation-triangle"></i>
          Bạn có một bài làm chưa hoàn thành.
          <a href="{% url 'forum:take_quiz' active_attempt.id %}" class="alert-link">Tiếp tục làm bài</a>
        </div>
        {% endif %}

        <div class="d-grid gap-2">
          <a href="{% url 'forum:start_quiz' quiz.id %}" class="btn btn-success btn-lg"><i class="bi bi-play-circle"></i> Bắt đầu làm bài</a>
        </div>
      </div>
    </div>
  </div>

  <div class="col-lg-4">
    <div class="card shadow-sm">
      <div class="card-header bg-light">
        <h5 class="card-title mb-0"><i class="bi bi-info-circle"></i> Hướng dẫn</h5>
      </div>
      <div class="card-body">
        <ul class="list-unstyled small">
          <li class="mb-2">
            <i class="bi bi-check-circle text-success me-2"></i>
            Bài kiểm tra có thời gian {{ quiz.time_limit }} phút
          </li>
          <li class="mb-2">
            <i class="bi bi-check-circle text-success me-2"></i>
            Không thể tạm dừng khi đã bắt đầu
          </li>
          <li class="mb-2">
            <i class="bi bi-check-circle text-success me-2"></i>
            Kết quả sẽ hiển thị ngay sau khi nộp bài
          </li>
          <li class="mb-2">
            <i class="bi bi-check-circle text-success me-2"></i>
            Mỗi câu hỏi chỉ có một đáp án đúng
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}