{% extends 'base.html' %}

{% block title %}Ví Coin{% endblock %}

{% block main %}

<div class="container">
          <div class="row g-4">
            <!-- Cột trái: Số dư & Lịch sử -->
            <div class="col-lg-8">
                <!-- Số dư -->
                <div class="card text-center shadow-sm mb-4">
                    <div class="card-body p-4">
                        <h6 class="text-muted mb-2">SỐ DƯ COIN HIỆN TẠI</h6>
                        <h1 class="display-3 fw-bolder text-primary"><i class="bi bi-coin"></i> {{ profile.coins}}</h1>
                    </div>
                </div>
                
                <!-- Lịch sử giao dịch -->
                <div class="card shadow-sm">
                    <div class="card-header">
                        <h4 class="mb-0"><i class="bi bi-list-ul me-2"></i>Lịch sử giao dịch</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-striped table-hover align-middle">
                                <thead>
                                    <tr>
                                        <th>Hoạt động</th>
                                        <th class="text-center">Thay đổi</th>
                                        <th class="text-end">Ngày</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><i class="bi bi-arrow-down-circle-fill text-danger me-2"></i>Tải tài liệu "Đề cương ôn tập Vi xử lý"</td>
                                        <td class="text-center fw-bold text-danger">-10</td>
                                        <td class="text-end text-muted small">18/10/2025</td>
                                    </tr>
                                    <tr>
                                        <td><i class="bi bi-arrow-up-circle-fill text-success me-2"></i>Đạt điểm tuyệt đối bài kiểm tra Cấu trúc dữ liệu</td>
                                        <td class="text-center fw-bold text-success">+50</td>
                                        <td class="text-end text-muted small">17/10/2025</td>
                                    </tr>
                                    <tr>
                                        <td><i class="bi bi-arrow-up-circle-fill text-success me-2"></i>Điểm danh hằng ngày</td>
                                        <td class="text-center fw-bold text-success">+10</td>
                                        <td class="text-end text-muted small">17/10/2025</td>
                                    </tr>
                                    <tr>
                                        <td><i class="bi bi-arrow-up-circle-fill text-success me-2"></i>Tài liệu của bạn được tải về</td>
                                        <td class="text-center fw-bold text-success">+5</td>
                                        <td class="text-end text-muted small">16/10/2025</td>
                                    </tr>
                                    <tr>
                                        <td><i class="bi bi-arrow-down-circle-fill text-danger me-2"></i>Làm bài kiểm tra "Giữa kỳ Giải tích 1"</td>
                                        <td class="text-center fw-bold text-danger">-5</td>
                                        <td class="text-end text-muted small">15/10/2025</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cột phải: Hướng dẫn & Mẹo -->
            <div class="col-lg-4">
                <div class="sticky-top" style="top: 20px;">
                    <div class="d-grid gap-4">
                        <!-- Card Cách kiếm coin -->
                        <div class="card shadow-sm">
                            <div class="card-header"><h6 class="mb-0"><i class="bi bi-question-circle me-2"></i>Làm sao để kiếm Coin?</h6></div>
                            <div class="card-body">
                                <ul class="list-unstyled small">
                                    <li class="mb-2"><i class="bi bi-check text-success me-2"></i>Điểm danh mỗi ngày.</li>
                                    <li class="mb-2"><i class="bi bi-check text-success me-2"></i>Tải lên tài liệu hữu ích.</li>
                                    <li class="mb-2"><i class="bi bi-check text-success me-2"></i>Đạt điểm cao trong các bài kiểm tra.</li>
                                    <li><i class="bi bi-check text-success me-2"></i>Mời bạn bè cùng tham gia.</li>
                                </ul>
                            </div>
                        </div>

                        <div class="text-center my-4 position-relative" id="inviteSection">

                            <!-- Card Mời bạn bè -->
                            <div id="inviteCard" class="card shadow-sm bg-info text-white text-center">
                                <div class="card-body">
                                    <h5 class="card-title"><i class="bi bi-gift-fill me-2"></i>Mời bạn bè</h5>
                                    <p class="small">Nhận ngay 100 coin cho mỗi lượt giới thiệu thành công!</p>
                                    <button type="button" class="btn btn-light fw-bold" onclick="showLargeQrCode()">
                                        Lấy mã giới thiệu QR
                                    </button>
                                </div>
                            </div>

                            <!-- Khối QR Code (ẩn ban đầu) -->
                            <div id="largeQrCodeContainer"
                                class="text-center my-4 p-4 bg-white rounded shadow-lg"
                                style="display: none; position: relative;">
                                <button type="button"
                                        class="btn-close position-absolute top-0 end-0 m-2"
                                        aria-label="Close"
                                        onclick="hideLargeQrCode()"></button>
                                <h5 class="mb-3">Quét mã để giới thiệu</h5>
                                <div id="largeQrCode" style="display: inline-block;"></div>
                                <p class="mt-3 small text-muted">Bấm nút X để đóng</p>
                            </div>

                        </div>



                        </div>
                    </div>
                </div>
            </div>
        </div>  

</div>

{% endblock %}